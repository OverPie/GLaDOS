from vk_bot.core.modules.basicplug import BasicPlug
from bs4 import BeautifulSoup
import requests


class Lurk(BasicPlug):
    command = ("лурк",)
    doc = "какие седня праздники"

    def main(self):
        text = " ".join(self.text[1:])
        url = f"http://lurkmore.to/{text}"
        req = requests.get(url)
        soup = BeautifulSoup(req.text, "lxml")
        error = "В настоящий момент тут ничего нет. Но вы можете:"
        try:
            result = soup.find(property="og:description")
            self.sendmsg(result.attrs['content'].replace(error, "нэ найдено"))
        except:
            self.sendmsg("нэ найдено")
